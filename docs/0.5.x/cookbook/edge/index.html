<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-0.5.x docs-doc-page docs-doc-id-cookbook/edge" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Edge node deployment | interLink</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://interlink-hq.github.io/interLink/img/img/interlink_logo.png"><meta data-rh="true" name="twitter:image" content="https://interlink-hq.github.io/interLink/img/img/interlink_logo.png"><meta data-rh="true" property="og:url" content="https://interlink-hq.github.io/interLink/docs/0.5.x/cookbook/edge"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="0.5.x"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.5.x"><meta data-rh="true" name="docsearch:version" content="0.5.x"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.5.x"><meta data-rh="true" property="og:title" content="Edge node deployment | interLink"><meta data-rh="true" name="description" content="Deploy interLink on an edge node, outside the local K8S cluster."><meta data-rh="true" property="og:description" content="Deploy interLink on an edge node, outside the local K8S cluster."><link data-rh="true" rel="icon" href="/interLink/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://interlink-hq.github.io/interLink/docs/0.5.x/cookbook/edge"><link data-rh="true" rel="alternate" href="https://interlink-hq.github.io/interLink/docs/0.5.x/cookbook/edge" hreflang="en"><link data-rh="true" rel="alternate" href="https://interlink-hq.github.io/interLink/docs/0.5.x/cookbook/edge" hreflang="x-default"><link rel="stylesheet" href="/interLink/assets/css/styles.491ac64f.css">
<script src="/interLink/assets/js/runtime~main.a562a2fd.js" defer="defer"></script>
<script src="/interLink/assets/js/main.06a9fe11.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">We are onboarding for our contribution to CNCF Sandbox! Please let us know for any broken or missing information as we move to the new home.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/interLink/"><div class="navbar__logo"><img src="/interLink/img/interlink_logo.png" alt="interLink Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/interLink/img/interlink_logo.png" alt="interLink Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Home</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/interLink/docs/0.5.x/intro">0.5.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/interLink/docs/next/cookbook/edge">Next</a></li><li><a class="dropdown__link" href="/interLink/docs/cookbook/edge">0.4.x</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/interLink/docs/0.5.x/cookbook/edge">0.5.x</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/interLink/docs/0.5.x/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/interlink-hq/interLink" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/interLink/docs/0.5.x/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/interLink/docs/0.5.x/arch">Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/interLink/docs/0.5.x/category/cookbook">Cookbook</a><button aria-label="Collapse sidebar category &#x27;Cookbook&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/interLink/docs/0.5.x/cookbook/edge">Edge node deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/interLink/docs/0.5.x/cookbook/incluster">In-cluster deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/interLink/docs/0.5.x/cookbook/tunneled">Tunneled deployment</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/interLink/docs/0.5.x/category/admin-guides">Admin guides</a><button aria-label="Expand sidebar category &#x27;Admin guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/interLink/docs/0.5.x/Developers">Developers guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/interLink/docs/0.5.x/Limitations">Current limitations</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->interLink<!-- --> <b>0.5.x</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/interLink/docs/cookbook/edge">latest version</a></b> (<!-- -->0.4.x<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/interLink/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/interLink/docs/0.5.x/category/cookbook"><span itemprop="name">Cookbook</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Edge node deployment</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 0.5.x</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Edge node deployment</h1>
<p>Deploy interLink on an edge node, outside the local K8S cluster.</p>
<img src="/interLink/img/scenario-1_light.svg" alt="Docusaurus themed image" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/interLink/img/scenario-1_dark.svg" alt="Docusaurus themed image" class="themedComponent_mlkZ themedComponent--dark_xIcU">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-interlink">Install interLink<a href="#install-interlink" class="hash-link" aria-label="Direct link to Install interLink" title="Direct link to Install interLink">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-remote-components">Deploy Remote components<a href="#deploy-remote-components" class="hash-link" aria-label="Direct link to Deploy Remote components" title="Direct link to Deploy Remote components">​</a></h3>
<p>In general, starting from the deployment of the remote components is adviced.
Since the kubernetes virtual node won&#x27;t reach the <code>Ready</code> status until all the
stack is successfully deployed.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="interlink-api-server">Interlink API server<a href="#interlink-api-server" class="hash-link" aria-label="Direct link to Interlink API server" title="Direct link to Interlink API server">​</a></h4>
<p><strong>For this deployment mode the remote host has to allow the kubernetes cluster
to connect to the Oauth2 proxy service port (30443 if you use the automatic
script for installation)</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-methods">Authentication Methods<a href="#authentication-methods" class="hash-link" aria-label="Direct link to Authentication Methods" title="Direct link to Authentication Methods">​</a></h2>
<p>interLink supports two primary authentication methods for secure communication between the Kubernetes cluster and the edge node:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="option-1-oidc-authentication-oauth2-proxy">Option 1: OIDC Authentication (OAuth2 Proxy)<a href="#option-1-oidc-authentication-oauth2-proxy" class="hash-link" aria-label="Direct link to Option 1: OIDC Authentication (OAuth2 Proxy)" title="Direct link to Option 1: OIDC Authentication (OAuth2 Proxy)">​</a></h3>
<p>You first need to initialize an OIDC client with you Identity Provider (IdP).</p>
<p>Since any OIDC provider working with
<a href="https://oauth2-proxy.github.io/oauth2-proxy/" target="_blank" rel="noopener noreferrer">OAuth2 Proxy</a> tool will do the
work, we are going to put the configuration for a generic OIDC identity provider
in this cookbook. Nevertheless you can find more detailed on dedicated pages
with instructions ready for
<a href="/interLink/docs/0.5.x/guides/deploy-interlink#create-an-oauth-github-app">GitHub</a>,
<a href="/interLink/docs/0.5.x/guides/oidc-IAM#egi-check-in">EGI checkin</a>,
<a href="/interLink/docs/0.5.x/guides/oidc-IAM#indigo-iam">INFN IAM</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="option-2-mtls-authentication-mutual-tls">Option 2: mTLS Authentication (Mutual TLS)<a href="#option-2-mtls-authentication-mutual-tls" class="hash-link" aria-label="Direct link to Option 2: mTLS Authentication (Mutual TLS)" title="Direct link to Option 2: mTLS Authentication (Mutual TLS)">​</a></h3>
<p>As an alternative to OIDC, you can use mutual TLS (mTLS) for authentication, which provides strong cryptographic authentication without requiring an external identity provider.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites-for-mtls">Prerequisites for mTLS<a href="#prerequisites-for-mtls" class="hash-link" aria-label="Direct link to Prerequisites for mTLS" title="Direct link to Prerequisites for mTLS">​</a></h4>
<ol>
<li>A Certificate Authority (CA) certificate</li>
<li>Server certificate and private key for the interLink API server</li>
<li>Client certificate and private key for the Virtual Kubelet</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="generate-certificates-for-mtls">Generate Certificates for mTLS<a href="#generate-certificates-for-mtls" class="hash-link" aria-label="Direct link to Generate Certificates for mTLS" title="Direct link to Generate Certificates for mTLS">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Generate CA private key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl genrsa -out ca-key.pem 4096</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate CA certificate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -new -x509 -days 365 -key ca-key.pem -sha256 -out ca.pem -subj &quot;/C=US/ST=CA/L=San Francisco/O=InterLink/CN=InterLink CA&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate server private key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl genrsa -out server-key.pem 4096</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate server certificate signing request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -subj &quot;/C=US/ST=CA/L=San Francisco/O=InterLink/CN=interlink-server&quot; -sha256 -new -key server-key.pem -out server.csr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate server certificate signed by CA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl x509 -req -days 365 -sha256 -in server.csr -CA ca.pem -CAkey ca-key.pem -out server-cert.pem -extensions v3_req</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate client private key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl genrsa -out client-key.pem 4096</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate client certificate signing request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -subj &quot;/C=US/ST=CA/L=San Francisco/O=InterLink/CN=interlink-client&quot; -sha256 -new -key client-key.pem -out client.csr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate client certificate signed by CA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl x509 -req -days 365 -sha256 -in client.csr -CA ca.pem -CAkey ca-key.pem -out client-cert.pem -extensions v3_req</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Clean up CSR files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm server.csr client.csr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-instructions">Installation Instructions<a href="#installation-instructions" class="hash-link" aria-label="Direct link to Installation Instructions" title="Direct link to Installation Instructions">​</a></h2>
<p>Choose one of the authentication methods above and follow the corresponding installation steps below.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="oidc-authentication-installation">OIDC Authentication Installation<a href="#oidc-authentication-installation" class="hash-link" aria-label="Direct link to OIDC Authentication Installation" title="Direct link to OIDC Authentication Installation">​</a></h3>
<p>Then download the
<a href="https://github.com/interlink-hq/interLink/releases" target="_blank" rel="noopener noreferrer">latest release</a> of the
interLink installer:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $HOME/.interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export VERSION=$(curl -s https://api.github.com/repos/interlink-hq/interlink/releases/latest  | jq -r .name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget -O $HOME/interlink-installer https://github.com/interlink-hq/interLink/releases/download/$VERSION/interlink-installer_Linux_x86_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x $HOME/.interlink/interlink-installer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Create a template configuration with the init option:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $HOME/.interlink/logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $HOME/.interlink/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $HOME/.interlink/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$HOME/.interlink/interlink-installer --init --config $HOME/.interlink/installer.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The configuration file should be filled as followed. This is the case where the
<code>my-node</code> will contact an edge service that will be listening on <code>PUBLIC_IP</code> and
<code>API_PORT</code> authenticating requests from an OIDC provider
<code>https://my_oidc_idp.com</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">$HOME/.interlink/installer.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">interlink_ip: PUBLIC_IP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interlink_port: API_PORT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interlink_version: X.X.X</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubelet_node_name: my-node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes_namespace: interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">node_limits:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cpu: &quot;1000&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # MEMORY in GB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    memory: 25600</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pods: &quot;100&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">oauth:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  provider: oidc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  issuer: https://my_oidc_idp.com/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scopes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;openid&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;email&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;offline_access&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;profile&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  audience: interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  grant_type: authorization_code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  group_claim: groups</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  group: &quot;my_vk_allowed_group&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  token_url: &quot;https://my_oidc_idp.com/token&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  device_code_url: &quot;https://my_oidc_idp/auth/device&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client_id: &quot;oidc-client-xx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client_secret: &quot;xxxxxx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">insecure_http: true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mtls-authentication-installation">mTLS Authentication Installation<a href="#mtls-authentication-installation" class="hash-link" aria-label="Direct link to mTLS Authentication Installation" title="Direct link to mTLS Authentication Installation">​</a></h3>
<p>For mTLS authentication, you don&#x27;t need OAuth2 Proxy. Instead, configure interLink directly with TLS certificates.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="prepare-certificate-files">Prepare Certificate Files<a href="#prepare-certificate-files" class="hash-link" aria-label="Direct link to Prepare Certificate Files" title="Direct link to Prepare Certificate Files">​</a></h4>
<p>First, copy your generated certificates to the appropriate locations:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $HOME/.interlink/certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $HOME/.interlink/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $HOME/.interlink/logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $HOME/.interlink/bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy certificates (assuming you generated them as shown above)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp ca.pem server-cert.pem server-key.pem $HOME/.interlink/certs/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp ca.pem client-cert.pem client-key.pem $HOME/.interlink/certs/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-mtls-configuration">Create mTLS Configuration<a href="#create-mtls-configuration" class="hash-link" aria-label="Direct link to Create mTLS Configuration" title="Direct link to Create mTLS Configuration">​</a></h4>
<p>Create the interLink configuration file with mTLS settings:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">$HOME/.interlink/config/InterLinkConfig.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">InterlinkAddress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//0.0.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">InterlinkPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">SidecarURL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">SidecarPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">VerboseLogging</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">ErrorsOnlyLogging</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">DataRootFolder</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/tmp/interlink&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># mTLS Configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">TLS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">Enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">CertFile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/home/myusername/.interlink/certs/server-cert.pem&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">KeyFile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/home/myusername/.interlink/certs/server-key.pem&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">CACertFile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/home/myusername/.interlink/certs/ca.pem&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="download-and-configure-interlink-binary">Download and Configure interLink Binary<a href="#download-and-configure-interlink-binary" class="hash-link" aria-label="Direct link to Download and Configure interLink Binary" title="Direct link to Download and Configure interLink Binary">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export VERSION=$(curl -s https://api.github.com/repos/interlink-hq/interlink/releases/latest | jq -r .name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget -O $HOME/.interlink/bin/interlink https://github.com/interlink-hq/interLink/releases/download/$VERSION/interlink_Linux_x86_64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x $HOME/.interlink/bin/interlink</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="start-interlink-api-server">Start interLink API Server<a href="#start-interlink-api-server" class="hash-link" aria-label="Direct link to Start interLink API Server" title="Direct link to Start interLink API Server">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Start interLink API server with mTLS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export INTERLINKCONFIGPATH=$HOME/.interlink/config/InterLinkConfig.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$HOME/.interlink/bin/interlink &amp;&gt; $HOME/.interlink/logs/interlink.log &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $! &gt; $HOME/.interlink/interlink.pid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-virtual-kubelet-for-mtls">Configure Virtual Kubelet for mTLS<a href="#configure-virtual-kubelet-for-mtls" class="hash-link" aria-label="Direct link to Configure Virtual Kubelet for mTLS" title="Direct link to Configure Virtual Kubelet for mTLS">​</a></h4>
<p>For the Kubernetes side (Virtual Kubelet), you&#x27;ll need to configure it to use client certificates. This configuration will be used when setting up the Helm chart:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">mTLS values for Helm chart</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">virtualkubelet</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">InterlinkURL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//PUBLIC_IP  </span><span class="token comment" style="color:#999988;font-style:italic"># Your edge node IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">InterlinkPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">TLS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">Enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">CertFile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/etc/vk/certs/client-cert.pem&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">KeyFile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/etc/vk/certs/client-key.pem&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">CACertFile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/etc/vk/certs/ca.pem&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Certificate secret mounts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">extraVolumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vk</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tls</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">secret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">secretName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vk</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tls</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">extraVolumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> vk</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tls</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /etc/vk/certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">readOnly</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-kubernetes-secrets-for-certificates">Create Kubernetes Secrets for Certificates<a href="#create-kubernetes-secrets-for-certificates" class="hash-link" aria-label="Direct link to Create Kubernetes Secrets for Certificates" title="Direct link to Create Kubernetes Secrets for Certificates">​</a></h4>
<p>Before deploying the Helm chart, create the necessary secrets:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Create namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create namespace interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create secret with client certificates for Virtual Kubelet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create secret generic vk-tls-certs \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --from-file=ca.pem=$HOME/.interlink/certs/ca.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --from-file=client-cert.pem=$HOME/.interlink/certs/client-cert.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --from-file=client-key.pem=$HOME/.interlink/certs/client-key.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n interlink</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mtls-security-considerations">mTLS Security Considerations<a href="#mtls-security-considerations" class="hash-link" aria-label="Direct link to mTLS Security Considerations" title="Direct link to mTLS Security Considerations">​</a></h4>
<p><strong>Certificate Management:</strong></p>
<ul>
<li>Implement regular certificate rotation for production deployments</li>
<li>Store private keys securely with restricted file permissions (600)</li>
<li>Keep CA private key highly secure and consider using a proper PKI solution</li>
<li>Monitor certificate expiration dates</li>
</ul>
<p><strong>Network Security:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Example firewall configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw allow from &lt;kubernetes-cluster-cidr&gt; to any port 3000 comment &quot;interLink mTLS API&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw deny 3000 comment &quot;Block public access to interLink API&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Certificate Validation:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Verify certificate details and chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl x509 -in server-cert.pem -text -noout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl verify -CAfile ca.pem server-cert.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Test mTLS connection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl s_client -connect YOUR_EDGE_NODE_IP:3000 -CAfile ca.pem -cert client-cert.pem -key client-key.pem</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mtls-troubleshooting">mTLS Troubleshooting<a href="#mtls-troubleshooting" class="hash-link" aria-label="Direct link to mTLS Troubleshooting" title="Direct link to mTLS Troubleshooting">​</a></h4>
<p><strong>Common Issues:</strong></p>
<ol>
<li><strong>Certificate verification errors</strong> - Check certificate chain and CA</li>
<li><strong>Permission denied</strong> - Verify file permissions and paths</li>
<li><strong>Handshake failures</strong> - Ensure client certificate is signed by the same CA</li>
</ol>
<p><strong>Debug Commands:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Check certificate chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl verify -CAfile ca.pem client-cert.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Test server connectivity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -v --cacert ca.pem --cert client-cert.pem --key client-key.pem https://YOUR_EDGE_NODE_IP:3000/pinglink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check interLink logs for TLS errors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tail -f $HOME/.interlink/logs/interlink.log | grep -i tls</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Log Messages to Monitor:</strong></p>
<ul>
<li>&quot;Loaded CA certificate for TLS client&quot;</li>
<li>&quot;mTLS enabled - requiring client certificates&quot;</li>
<li>&quot;Failed to create TLS HTTP client&quot;</li>
<li>&quot;certificate verification failed&quot;</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Please fill interlink_version with the desired version.<br>
<!-- -->In alternative get the latest with:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -s https://api.github.com/repos/interlink-hq/interlink/releases/latest  | jq -r .name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>Now you are ready to start the OIDC authentication flow to generate all your
manifests and configuration files for the interLink components. To do so, just
execute the installer:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$HOME/.interlink/interlink-installer --config $HOME/.interlink/installer.yaml --output-dir $HOME/.interlink/manifests/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Install Oauth2-Proxy and interLink API server services and configurations with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x $HOME/.interlink/manifests/interlink-remote.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$HOME/.interlink/manifests/interlink-remote.sh install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then start the services with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$HOME/.interlink/manifests/interlink-remote.sh start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With <code>stop</code> command you can stop the service. By default logs are store in
<code>~/.interlink/logs</code>, checkout there for any error before moving to the next
step.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p><strong>N.B.</strong> you can look the oauth2_proxy configuration parameters looking directly
into the <code>interlink-remote.sh</code> script.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>N.B.</strong> logs (expecially if in verbose mode) can become pretty huge, consider
to implement your favorite rotation routine for all the logs in
<code>~/.interlink/logs/</code>.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-service">Plugin service<a href="#plugin-service" class="hash-link" aria-label="Direct link to Plugin service" title="Direct link to Plugin service">​</a></h4>
<p>Select here the featured plugin you want to try:</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Docker</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">SLURM</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Kubernetes</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p><em>Offload your pods to a remote machine with Docker engine available.</em></p><ul>
<li>
<p>Create a configuration file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">$HOME/.interlink/config/plugin-config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">## Multi user host</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Socket: &quot;unix:///home/myusername/.interlink/.plugin.sock&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">InterlinkPort: &quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SidecarPort: &quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CommandPrefix: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DataRootFolder: &quot;/home/myusername/.interlink/jobs/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BashPath: /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VerboseLogging: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ErrorsOnlyLogging: false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>N.B.</strong> Depending on wheter you edge is single user or not,
you should know by previous steps which section to uncomment here.</li>
<li>More on configuration options at
<a href="https://github.com/interlink-hq/interlink-docker-plugin/blob/main/README.md" target="_blank" rel="noopener noreferrer">official repo</a></li>
</ul>
</li>
<li>
<p>Download the <a href="https://github.com/interlink-hq/interlink-docker-plugin/releases" target="_blank" rel="noopener noreferrer">latest release</a>
binary in <code>$HOME/.interlink/bin/plugin</code> for either GPU host or CPU host (tags ending with <code>no-GPU</code>)</p>
</li>
<li>
<p>Start the plugins passing the configuration that you have just created:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export INTERLINKCONFIGPATH=$HOME/.interlink/config/plugin-config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$HOME/.interlink/bin/plugin &amp;&gt; $HOME/.interlink/logs/plugin.log &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $! &gt; $HOME/.interlink/plugin.pid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Check the logs in <code>$HOME/.interlink/logs/plugin.log</code>.</p>
</li>
<li>
<p>To kill and restart the process is enough:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># kill</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kill $(cat $HOME/.interlink/plugin.pid)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># restart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export INTERLINKCONFIGPATH=$HOME/.interlink/config/plugin-config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$HOME/.interlink/bin/plugin &amp;&gt; $HOME/.interlink/logs/plugin.log &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $! &gt; $HOME/.interlink/plugin.pid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul><p>Almost there! Now it&#x27;s time to add this virtual node into the Kubernetes cluster!</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p><em>Offload your pods to an HPC SLURM based batch system.</em></p><ul>
<li>
<p>Please be sure that you have a shared filesystem area with the SLURM nodes available from the edge node. In this case our <code>DataRootFolder</code> is <code>$HOME/.interlink/jobs</code></p>
</li>
<li>
<p>Create a configuration file (<strong>remember to substitute <code>/home/username/</code> with your actual home path</strong>):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">./interlink/manifests/plugin-config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Socket: &quot;unix:///home/myusername/.interlink/.plugin.sock&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">InterlinkPort: &quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SidecarPort: &quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CommandPrefix: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DataRootFolder: &quot;/home/myusername/.interlink/jobs/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BashPath: /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VerboseLogging: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ErrorsOnlyLogging: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SbatchPath: &quot;/usr/bin/sbatch&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ScancelPath: &quot;/usr/bin/scancel&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SqueuePath: &quot;/usr/bin/squeue&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SingularityPrefix: &quot;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>More on configuration options at
<a href="https://github.com/interlink-hq/interlink-slurm-plugin/blob/main/README.md" target="_blank" rel="noopener noreferrer">official repo</a></li>
</ul>
</li>
<li>
<p>Download the <a href="https://github.com/interlink-hq/interlink-slurm-plugin/releases" target="_blank" rel="noopener noreferrer">latest release</a>
binary in <code>$HOME/.interlink/bin/plugin</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export PLUGIN_VERSION=$(curl -s https://api.github.com/repos/interlink-hq/interlink-slurm-plugin/releases/latest  | jq -r .name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget -O $HOME/.interlink/bin/plugin https://github.com/interlink-hq/interlink-slurm-plugin/releases/download/${PLUGIN_VERSION}/interlink-sidecar-slurm_Linux_x86_64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Start the plugins passing the configuration that you have just created:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export SLURMCONFIGPATH=$HOME/.interlink/manifests/plugin-config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$HOME/.interlink/bin/plugin &amp;&gt; $HOME/.interlink/logs/plugin.log &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $! &gt; $HOME/.interlink/plugin.pid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Check the logs in <code>$HOME/.interlink/logs/plugin.log</code>.</p>
</li>
<li>
<p>To kill and restart the process is enough:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># kill</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kill $(cat $HOME/.interlink/plugin.pid)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># restart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export SLURMCONFIGPATH=$HOME/.interlink/manifests/plugin-config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$HOME/.interlink/bin/plugin &amp;&gt; $HOME/.interlink/logs/plugin.log &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $! &gt; $HOME/.interlink/plugin.pid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul><p>Almost there! Now it&#x27;s time to add this virtual node into the Kubernetes cluster!</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p><em>Offload your pods to a remote Kubernetes cluster.</em></p><p>KUBERNETES PLUGIN IS COMING SOON! For test instructions contact us!</p></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="systemd-service-configuration">Systemd Service Configuration<a href="#systemd-service-configuration" class="hash-link" aria-label="Direct link to Systemd Service Configuration" title="Direct link to Systemd Service Configuration">​</a></h2>
<p>For production deployments, it&#x27;s recommended to manage interLink components using systemd services. This provides automatic startup, restart on failure, and proper logging.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-system-user">Create System User<a href="#create-system-user" class="hash-link" aria-label="Direct link to Create System User" title="Direct link to Create System User">​</a></h3>
<p>First, create a dedicated system user for running interLink services:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo useradd --system --create-home --home-dir /opt/interlink --shell /bin/bash interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir -p /opt/interlink/{bin,config,logs}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown -R interlink:interlink /opt/interlink</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="copy-binaries-and-configuration">Copy Binaries and Configuration<a href="#copy-binaries-and-configuration" class="hash-link" aria-label="Direct link to Copy Binaries and Configuration" title="Direct link to Copy Binaries and Configuration">​</a></h3>
<p>Move your interLink components to the system directories:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Copy binaries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp $HOME/.interlink/bin/* /opt/interlink/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp $HOME/.interlink/manifests/interlink-remote.sh /opt/interlink/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod +x /opt/interlink/bin/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy configuration files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp $HOME/.interlink/config/* /opt/interlink/config/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp $HOME/.interlink/manifests/*.yaml /opt/interlink/config/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set ownership</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown -R interlink:interlink /opt/interlink</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="oauth2-proxy-service">OAuth2 Proxy Service<a href="#oauth2-proxy-service" class="hash-link" aria-label="Direct link to OAuth2 Proxy Service" title="Direct link to OAuth2 Proxy Service">​</a></h3>
<p>Create the OAuth2 proxy systemd service:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/systemd/system/interlink-oauth2-proxy.service</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=OAuth2 Proxy for interLink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After=network.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wants=network.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Group=interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WorkingDirectory=/opt/interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment=OAUTH2_PROXY_CONFIG=/opt/interlink/config/oauth2-proxy.cfg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/opt/interlink/bin/oauth2-proxy --config=/opt/interlink/config/oauth2-proxy.cfg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecReload=/bin/kill -HUP $MAINPID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestartSec=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StandardOutput=append:/opt/interlink/logs/oauth2-proxy.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StandardError=append:/opt/interlink/logs/oauth2-proxy.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Security settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NoNewPrivileges=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectSystem=strict</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectHome=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ReadWritePaths=/opt/interlink/logs /tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PrivateTmp=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="interlink-api-server-service">interLink API Server Service<a href="#interlink-api-server-service" class="hash-link" aria-label="Direct link to interLink API Server Service" title="Direct link to interLink API Server Service">​</a></h3>
<p>Create the interLink API server systemd service:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/systemd/system/interlink-api.service</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=interLink API Server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After=network.target interlink-oauth2-proxy.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wants=network.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requires=interlink-oauth2-proxy.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Group=interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WorkingDirectory=/opt/interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment=INTERLINKCONFIGPATH=/opt/interlink/config/InterLinkConfig.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/opt/interlink/bin/interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecReload=/bin/kill -HUP $MAINPID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestartSec=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StandardOutput=append:/opt/interlink/logs/interlink-api.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StandardError=append:/opt/interlink/logs/interlink-api.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Security settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NoNewPrivileges=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectSystem=strict</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectHome=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ReadWritePaths=/opt/interlink/logs /opt/interlink/jobs /tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PrivateTmp=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-service-1">Plugin Service<a href="#plugin-service-1" class="hash-link" aria-label="Direct link to Plugin Service" title="Direct link to Plugin Service">​</a></h3>
<p>Create the plugin systemd service (example for Docker plugin):</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Docker Plugin</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">SLURM Plugin</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/systemd/system/interlink-docker-plugin.service</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=interLink Docker Plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After=network.target docker.service interlink-api.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wants=network.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requires=docker.service interlink-api.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Group=interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WorkingDirectory=/opt/interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment=INTERLINKCONFIGPATH=/opt/interlink/config/plugin-config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/opt/interlink/bin/plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecReload=/bin/kill -HUP $MAINPID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestartSec=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StandardOutput=append:/opt/interlink/logs/plugin.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StandardError=append:/opt/interlink/logs/plugin.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Security settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NoNewPrivileges=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectSystem=strict</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectHome=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ReadWritePaths=/opt/interlink/logs /opt/interlink/jobs /tmp /var/run/docker.sock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PrivateTmp=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Docker access</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SupplementaryGroups=docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/systemd/system/interlink-slurm-plugin.service</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=interLink SLURM Plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After=network.target interlink-api.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wants=network.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requires=interlink-api.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Group=interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WorkingDirectory=/opt/interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Environment=SLURMCONFIGPATH=/opt/interlink/config/plugin-config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/opt/interlink/bin/plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecReload=/bin/kill -HUP $MAINPID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestartSec=10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StandardOutput=append:/opt/interlink/logs/plugin.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StandardError=append:/opt/interlink/logs/plugin.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Security settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NoNewPrivileges=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectSystem=strict</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectHome=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ReadWritePaths=/opt/interlink/logs /opt/interlink/jobs /tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PrivateTmp=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="log-rotation-configuration">Log Rotation Configuration<a href="#log-rotation-configuration" class="hash-link" aria-label="Direct link to Log Rotation Configuration" title="Direct link to Log Rotation Configuration">​</a></h3>
<p>Create log rotation configuration to prevent log files from growing too large:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/logrotate.d/interlink</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/interlink/logs/*.log {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    daily</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rotate 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    delaycompress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    missingok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    notifempty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    postrotate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        systemctl reload interlink-oauth2-proxy interlink-api interlink-*-plugin 2&gt;/dev/null || true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    endscript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-management-commands">Service Management Commands<a href="#service-management-commands" class="hash-link" aria-label="Direct link to Service Management Commands" title="Direct link to Service Management Commands">​</a></h3>
<p>Enable and start all services:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Enable services to start on boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl enable interlink-oauth2-proxy interlink-api interlink-docker-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start services in order</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start interlink-oauth2-proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start interlink-api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start interlink-docker-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check service status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl status interlink-oauth2-proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl status interlink-api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl status interlink-docker-plugin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-operations">Service Operations<a href="#service-operations" class="hash-link" aria-label="Direct link to Service Operations" title="Direct link to Service Operations">​</a></h3>
<p>Common systemd operations for managing interLink services:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># View service logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo journalctl -u interlink-api -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo journalctl -u interlink-oauth2-proxy -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo journalctl -u interlink-docker-plugin -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Restart a service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl restart interlink-api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Stop all interLink services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl stop interlink-docker-plugin interlink-api interlink-oauth2-proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start all interLink services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start interlink-oauth2-proxy interlink-api interlink-docker-plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># View service configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl cat interlink-api</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-and-health-checks">Monitoring and Health Checks<a href="#monitoring-and-health-checks" class="hash-link" aria-label="Direct link to Monitoring and Health Checks" title="Direct link to Monitoring and Health Checks">​</a></h3>
<p>Create a simple health check script:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/opt/interlink/bin/health-check.sh</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Health check script for interLink services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SOCKET_PATH=&quot;/opt/interlink/.interlink.sock&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LOG_FILE=&quot;/opt/interlink/logs/health-check.log&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;$(date): Starting health check&quot; &gt;&gt; &quot;$LOG_FILE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check if socket exists and is responding</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if [ -S &quot;$SOCKET_PATH&quot; ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response=$(curl -s --unix-socket &quot;$SOCKET_PATH&quot; http://unix/pinglink)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if [ $? -eq 0 ]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo &quot;$(date): Health check passed - $response&quot; &gt;&gt; &quot;$LOG_FILE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        exit 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo &quot;$(date): Health check failed - no response from socket&quot; &gt;&gt; &quot;$LOG_FILE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;$(date): Health check failed - socket not found&quot; &gt;&gt; &quot;$LOG_FILE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Make executable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod +x /opt/interlink/bin/health-check.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown interlink:interlink /opt/interlink/bin/health-check.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Add a systemd timer for regular health checks:</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/systemd/system/interlink-health-check.service</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=interLink Health Check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After=interlink-api.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requires=interlink-api.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type=oneshot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Group=interlink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/opt/interlink/bin/health-check.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">/etc/systemd/system/interlink-health-check.timer</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=Run interLink Health Check every 5 minutes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Requires=interlink-health-check.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Timer]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OnCalendar=*:0/5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Persistent=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=timers.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Enable the health check timer:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl enable interlink-health-check.timer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start interlink-health-check.timer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-systemd-issues">Troubleshooting Systemd Issues<a href="#troubleshooting-systemd-issues" class="hash-link" aria-label="Direct link to Troubleshooting Systemd Issues" title="Direct link to Troubleshooting Systemd Issues">​</a></h3>
<p>Common troubleshooting steps:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Check service status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl status interlink-api --no-pager -l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># View recent logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo journalctl -u interlink-api --since &quot;1 hour ago&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check configuration syntax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemd-analyze verify /etc/systemd/system/interlink-api.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># View service dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl list-dependencies interlink-api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Reset failed state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl reset-failed interlink-api</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="security-considerations">Security Considerations<a href="#security-considerations" class="hash-link" aria-label="Direct link to Security Considerations" title="Direct link to Security Considerations">​</a></h3>
<p>The systemd configuration includes several security features:</p>
<ol>
<li><strong>Dedicated user</strong>: Services run as non-privileged <code>interlink</code> user</li>
<li><strong>Filesystem protection</strong>: <code>ProtectSystem</code> and <code>ProtectHome</code> limit filesystem access</li>
<li><strong>No new privileges</strong>: <code>NoNewPrivileges</code> prevents privilege escalation</li>
<li><strong>Private temp</strong>: <code>PrivateTmp</code> provides isolated temporary directories</li>
<li><strong>Minimal permissions</strong>: <code>ReadWritePaths</code> restricts write access to necessary directories</li>
</ol>
<p>For additional security, consider:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Set up firewall rules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw allow 30443/tcp comment &quot;OAuth2 Proxy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw allow from &lt;kubernetes-cluster-cidr&gt; to any port 3000 comment &quot;interLink API&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Secure configuration files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod 640 /opt/interlink/config/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown root:interlink /opt/interlink/config/*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="3rd-party-plugins">3rd-party plugins<a href="#3rd-party-plugins" class="hash-link" aria-label="Direct link to 3rd-party plugins" title="Direct link to 3rd-party plugins">​</a></h5>
<p>There are more 3rd-party plugins developed that you can get inspired by or even
use out of the box. You can find some ref in the
<a href="/interLink/docs/0.5.x/guides/deploy-interlink#attach-your-favorite-plugin-or-develop-one">quick start section</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="test-interlink-stack-health">Test interLink stack health<a href="#test-interlink-stack-health" class="hash-link" aria-label="Direct link to Test interLink stack health" title="Direct link to Test interLink stack health">​</a></h4>
<p>interLink comes with a call that can be used to monitor the overall status of
both interlink server and plugins, at once.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -v --unix-socket ${HOME}/.interlink/.interlink.sock  http://unix/pinglink</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This call will return the status of the system and its readiness to submit jobs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-kubernetes-components">Deploy Kubernetes components<a href="#deploy-kubernetes-components" class="hash-link" aria-label="Direct link to Deploy Kubernetes components" title="Direct link to Deploy Kubernetes components">​</a></h3>
<p>The deployment of the Kubernetes components are managed by the official
<a href="https://github.com/interlink-hq/interlink-helm-chart" target="_blank" rel="noopener noreferrer">HELM chart</a>. The deployment steps differ based on your chosen authentication method.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="for-oidc-authentication">For OIDC Authentication<a href="#for-oidc-authentication" class="hash-link" aria-label="Direct link to For OIDC Authentication" title="Direct link to For OIDC Authentication">​</a></h4>
<p>You can install the helm chart with the preconfigured (by the installer script) helm values in <code>./interlink/manifests/values.yaml</code></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export INTERLINK_CHART_VERSION=&quot;X.X.X&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade --install \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n interlink \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  my-node \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  oci://ghcr.io/interlink-hq/interlink-helm-chart/interlink \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --version $INTERLINK_CHART_VERSION \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --values ./.interlink/manifests/values.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="for-mtls-authentication">For mTLS Authentication<a href="#for-mtls-authentication" class="hash-link" aria-label="Direct link to For mTLS Authentication" title="Direct link to For mTLS Authentication">​</a></h4>
<p>For mTLS, create a custom values file and deploy:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Create values file for mTLS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat &gt; $HOME/.interlink/mtls-values.yaml &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">virtualkubelet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    InterlinkURL: https://YOUR_EDGE_NODE_IP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    InterlinkPort: &quot;3000&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TLS:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      CertFile: &quot;/etc/vk/certs/client-cert.pem&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      KeyFile: &quot;/etc/vk/certs/client-key.pem&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      CACertFile: &quot;/etc/vk/certs/ca.pem&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  extraVolumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: vk-tls-certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      secret:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        secretName: vk-tls-certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  extraVolumeMounts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: vk-tls-certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      mountPath: /etc/vk/certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      readOnly: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nodeSelector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubernetes.io/arch: amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kubernetes.io/os: linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nodeName: &quot;my-node&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    limits:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cpu: &quot;1000m&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      memory: &quot;25600Mi&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pods: &quot;100&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Deploy with mTLS configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export INTERLINK_CHART_VERSION=&quot;X.X.X&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm upgrade --install \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --create-namespace \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n interlink \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  my-node \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  oci://ghcr.io/interlink-hq/interlink-helm-chart/interlink \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --version $INTERLINK_CHART_VERSION \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --values $HOME/.interlink/mtls-values.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Remember to pick the
<a href="https://github.com/interlink-hq/interlink-helm-chart/blob/main/interlink/Chart.yaml#L18" target="_blank" rel="noopener noreferrer">version of the chart</a>
and put it into the <code>INTERLINK_CHART_VERSION</code> env var above.</p></div></div>
<p>Whenever you see the node ready, you are good to go!</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>You can find a demo pod to test your setup
<a href="/interLink/docs/0.5.x/guides/develop-a-plugin#lets-test-is-out">here</a>.</p></div></div>
<p>To start debugging in case of problems we suggest starting from the pod
containers logs!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/interlink-hq/interLink/versioned_docs/version-0.5.x/cookbook/1-edge.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/interLink/docs/0.5.x/category/cookbook"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cookbook</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/interLink/docs/0.5.x/cookbook/incluster"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">In-cluster deployment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#install-interlink" class="table-of-contents__link toc-highlight">Install interLink</a><ul><li><a href="#deploy-remote-components" class="table-of-contents__link toc-highlight">Deploy Remote components</a></li></ul></li><li><a href="#authentication-methods" class="table-of-contents__link toc-highlight">Authentication Methods</a><ul><li><a href="#option-1-oidc-authentication-oauth2-proxy" class="table-of-contents__link toc-highlight">Option 1: OIDC Authentication (OAuth2 Proxy)</a></li><li><a href="#option-2-mtls-authentication-mutual-tls" class="table-of-contents__link toc-highlight">Option 2: mTLS Authentication (Mutual TLS)</a></li></ul></li><li><a href="#installation-instructions" class="table-of-contents__link toc-highlight">Installation Instructions</a><ul><li><a href="#oidc-authentication-installation" class="table-of-contents__link toc-highlight">OIDC Authentication Installation</a></li><li><a href="#mtls-authentication-installation" class="table-of-contents__link toc-highlight">mTLS Authentication Installation</a></li></ul></li><li><a href="#systemd-service-configuration" class="table-of-contents__link toc-highlight">Systemd Service Configuration</a><ul><li><a href="#create-system-user" class="table-of-contents__link toc-highlight">Create System User</a></li><li><a href="#copy-binaries-and-configuration" class="table-of-contents__link toc-highlight">Copy Binaries and Configuration</a></li><li><a href="#oauth2-proxy-service" class="table-of-contents__link toc-highlight">OAuth2 Proxy Service</a></li><li><a href="#interlink-api-server-service" class="table-of-contents__link toc-highlight">interLink API Server Service</a></li><li><a href="#plugin-service-1" class="table-of-contents__link toc-highlight">Plugin Service</a></li><li><a href="#log-rotation-configuration" class="table-of-contents__link toc-highlight">Log Rotation Configuration</a></li><li><a href="#service-management-commands" class="table-of-contents__link toc-highlight">Service Management Commands</a></li><li><a href="#service-operations" class="table-of-contents__link toc-highlight">Service Operations</a></li><li><a href="#monitoring-and-health-checks" class="table-of-contents__link toc-highlight">Monitoring and Health Checks</a></li><li><a href="#troubleshooting-systemd-issues" class="table-of-contents__link toc-highlight">Troubleshooting Systemd Issues</a></li><li><a href="#security-considerations" class="table-of-contents__link toc-highlight">Security Considerations</a></li><li><a href="#deploy-kubernetes-components" class="table-of-contents__link toc-highlight">Deploy Kubernetes components</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/interLink/docs/intro">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/intertwin/shared_invite/zt-2cs67h9wz-2DFQ6EiSQGS1vlbbbJHctA" target="_blank" rel="noopener noreferrer" class="footer__link-item">interTwin project Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/interlink-hq/interLink" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Originally created by INFN - Copyright © interLink a Series of LF Projects, LLC.</div></div></div></footer></div>
</body>
</html>