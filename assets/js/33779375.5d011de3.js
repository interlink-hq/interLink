"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9699],{1848:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>u,contentTitle:()=>d,default:()=>m,frontMatter:()=>c,metadata:()=>h,toc:()=>p});var t=i(5893),r=i(1151),l=i(4866),s=i(5162),o=i(9965),a=i(4996);const c={sidebar_position:3},d="Edge node deployment",h={id:"cookbook/edge",title:"Edge node deployment",description:"Deploy interLink on an edge node, outside the local K8S cluster.",source:"@site/versioned_docs/version-0.4.x/cookbook/1-edge.mdx",sourceDirName:"cookbook",slug:"/cookbook/edge",permalink:"/interLink/docs/0.4.x/cookbook/edge",draft:!1,unlisted:!1,editUrl:"https://github.com/interlink-hq/interLink/versioned_docs/version-0.4.x/cookbook/1-edge.mdx",tags:[],version:"0.4.x",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Cookbook",permalink:"/interLink/docs/0.4.x/category/cookbook"},next:{title:"In-cluster deployment",permalink:"/interLink/docs/0.4.x/cookbook/incluster"}},u={},p=[{value:"Install interLink",id:"install-interlink",level:2},{value:"Deploy Remote components",id:"deploy-remote-components",level:3},{value:"Interlink API server",id:"interlink-api-server",level:4},{value:"Plugin service",id:"plugin-service",level:4},{value:"3rd-party plugins",id:"3rd-party-plugins",level:5},{value:"Test interLink stack health",id:"test-interlink-stack-health",level:4},{value:"Deploy Kubernetes components",id:"deploy-kubernetes-components",level:3}];function g(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"edge-node-deployment",children:"Edge node deployment"}),"\n",(0,t.jsx)(n.p,{children:"Deploy interLink on an edge node, outside the local K8S cluster."}),"\n",(0,t.jsx)(o.Z,{alt:"Docusaurus themed image",sources:{light:(0,a.Z)("/img/scenario-1_light.svg"),dark:(0,a.Z)("/img/scenario-1_dark.svg")}}),"\n",(0,t.jsx)(n.h2,{id:"install-interlink",children:"Install interLink"}),"\n",(0,t.jsx)(n.h3,{id:"deploy-remote-components",children:"Deploy Remote components"}),"\n",(0,t.jsxs)(n.p,{children:["In general, starting from the deployment of the remote components is adviced.\nSince the kubernetes virtual node won't reach the ",(0,t.jsx)(n.code,{children:"Ready"})," status until all the\nstack is successfully deployed."]}),"\n",(0,t.jsx)(n.h4,{id:"interlink-api-server",children:"Interlink API server"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"For this deployment mode the remote host has to allow the kubernetes cluster\nto connect to the Oauth2 proxy service port (30443 if you use the automatic\nscript for installation)"})}),"\n",(0,t.jsx)(n.p,{children:"You first need to initialize an OIDC client with you Identity Provider (IdP)."}),"\n",(0,t.jsxs)(n.p,{children:["Since any OIDC provider working with\n",(0,t.jsx)(n.a,{href:"https://oauth2-proxy.github.io/oauth2-proxy/",children:"OAuth2 Proxy"})," tool will do the\nwork, we are going to put the configuration for a generic OIDC identity provider\nin this cookbook. Nevertheless you can find more detailed on dedicated pages\nwith instructions ready for\n",(0,t.jsx)(n.a,{href:"../guides/deploy-interlink#create-an-oauth-github-app",children:"GitHub"}),",\n",(0,t.jsx)(n.a,{href:"/interLink/docs/0.4.x/guides/oidc-IAM#egi-check-in",children:"EGI checkin"}),",\n",(0,t.jsx)(n.a,{href:"../guides/oidc-IAM#indigo-iam",children:"INFN IAM"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Then download the\n",(0,t.jsx)(n.a,{href:"https://github.com/interlink-hq/interLink/releases",children:"latest release"})," of the\ninterLink installer:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir -p $HOME/.interlink\nexport VERSION=$(curl -s https://api.github.com/repos/interlink-hq/interlink/releases/latest  | jq -r .name)\nwget -O $HOME/interlink-installer https://github.com/interlink-hq/interLink/releases/download/$VERSION/interlink-installer_Linux_x86_64\nchmod +x $HOME/.interlink/interlink-installer\n"})}),"\n",(0,t.jsx)(n.p,{children:"Create a template configuration with the init option:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir -p $HOME/.interlink/logs\nmkdir -p $HOME/.interlink/bin\nmkdir -p $HOME/.interlink/config\n$HOME/.interlink/interlink-installer --init --config $HOME/.interlink/installer.yaml\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The configuration file should be filled as followed. This is the case where the\n",(0,t.jsx)(n.code,{children:"my-node"})," will contact an edge service that will be listening on ",(0,t.jsx)(n.code,{children:"PUBLIC_IP"})," and\n",(0,t.jsx)(n.code,{children:"API_PORT"})," authenticating requests from an OIDC provider\n",(0,t.jsx)(n.code,{children:"https://my_oidc_idp.com"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="$HOME/.interlink/installer.yaml"',children:'interlink_ip: PUBLIC_IP\ninterlink_port: API_PORT\ninterlink_version: X.X.X\nkubelet_node_name: my-node\nkubernetes_namespace: interlink\nnode_limits:\n    cpu: "1000"\n    # MEMORY in GB\n    memory: 25600\n    pods: "100"\noauth:\n  provider: oidc\n  issuer: https://my_oidc_idp.com/\n  scopes:\n    - "openid"\n    - "email"\n    - "offline_access"\n    - "profile"\n  audience: interlink\n  grant_type: authorization_code\n  group_claim: groups\n  group: "my_vk_allowed_group"\n  token_url: "https://my_oidc_idp.com/token"\n  device_code_url: "https://my_oidc_idp/auth/device"\n  client_id: "oidc-client-xx"\n  client_secret: "xxxxxx"\ninsecure_http: true\n'})}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsxs)(n.p,{children:["Please fill interlink_version with the desired version.",(0,t.jsx)(n.br,{}),"\n","In alternative get the latest with:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -s https://api.github.com/repos/interlink-hq/interlink/releases/latest  | jq -r .name\n"})})]}),"\n",(0,t.jsx)(n.p,{children:"Now you are ready to start the OIDC authentication flow to generate all your\nmanifests and configuration files for the interLink components. To do so, just\nexecute the installer:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$HOME/.interlink/interlink-installer --config $HOME/.interlink/installer.yaml --output-dir $HOME/.interlink/manifests/\n"})}),"\n",(0,t.jsx)(n.p,{children:"Install Oauth2-Proxy and interLink API server services and configurations with:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"chmod +x $HOME/.interlink/manifests/interlink-remote.sh\n$HOME/.interlink/manifests/interlink-remote.sh install\n"})}),"\n",(0,t.jsx)(n.p,{children:"Then start the services with:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$HOME/.interlink/manifests/interlink-remote.sh start\n"})}),"\n",(0,t.jsxs)(n.p,{children:["With ",(0,t.jsx)(n.code,{children:"stop"})," command you can stop the service. By default logs are store in\n",(0,t.jsx)(n.code,{children:"~/.interlink/logs"}),", checkout there for any error before moving to the next\nstep."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"N.B."})," you can look the oauth2_proxy configuration parameters looking directly\ninto the ",(0,t.jsx)(n.code,{children:"interlink-remote.sh"})," script."]})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"N.B."})," logs (expecially if in verbose mode) can become pretty huge, consider\nto implement your favorite rotation routine for all the logs in\n",(0,t.jsx)(n.code,{children:"~/.interlink/logs/"}),"."]})}),"\n",(0,t.jsx)(n.h4,{id:"plugin-service",children:"Plugin service"}),"\n",(0,t.jsx)(n.p,{children:"Select here the featured plugin you want to try:"}),"\n",(0,t.jsxs)(l.Z,{groupId:"plugins",children:[(0,t.jsxs)(s.Z,{value:"docker",label:"Docker",default:!0,children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Offload your pods to a remote machine with Docker engine available."})}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Create a configuration file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="$HOME/.interlink/config/plugin-config.yaml"',children:'## Multi user host\nSocket: "unix:///home/myusername/.interlink/.plugin.sock"\nInterlinkPort: "0"\nSidecarPort: "0"\n\nCommandPrefix: ""\nDataRootFolder: "/home/myusername/.interlink/jobs/"\nBashPath: /bin/bash\nVerboseLogging: false\nErrorsOnlyLogging: false\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"N.B."})," Depending on wheter you edge is single user or not,\nyou should know by previous steps which section to uncomment here."]}),"\n",(0,t.jsxs)(n.li,{children:["More on configuration options at\n",(0,t.jsx)(n.a,{href:"https://github.com/interlink-hq/interlink-docker-plugin/blob/main/README.md",children:"official repo"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Download the ",(0,t.jsx)(n.a,{href:"https://github.com/interlink-hq/interlink-docker-plugin/releases",children:"latest release"}),"\nbinary in ",(0,t.jsx)(n.code,{children:"$HOME/.interlink/bin/plugin"})," for either GPU host or CPU host (tags ending with ",(0,t.jsx)(n.code,{children:"no-GPU"}),")"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Start the plugins passing the configuration that you have just created:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"export INTERLINKCONFIGPATH=$HOME/.interlink/config/plugin-config.yaml\n$HOME/.interlink/bin/plugin &> $HOME/.interlink/logs/plugin.log &\necho $! > $HOME/.interlink/plugin.pid\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Check the logs in ",(0,t.jsx)(n.code,{children:"$HOME/.interlink/logs/plugin.log"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"To kill and restart the process is enough:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# kill\nkill $(cat $HOME/.interlink/plugin.pid)\n\n# restart\nexport INTERLINKCONFIGPATH=$HOME/.interlink/config/plugin-config.yaml\n$HOME/.interlink/bin/plugin &> $HOME/.interlink/logs/plugin.log &\necho $! > $HOME/.interlink/plugin.pid\n"})}),"\n"]}),"\n"]}),(0,t.jsx)(n.p,{children:"Almost there! Now it's time to add this virtual node into the Kubernetes cluster!"})]}),(0,t.jsxs)(s.Z,{value:"slurm",label:"SLURM",children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Offload your pods to an HPC SLURM based batch system."})}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Please be sure that you have a shared filesystem area with the SLURM nodes available from the edge node. In this case our ",(0,t.jsx)(n.code,{children:"DataRootFolder"})," is ",(0,t.jsx)(n.code,{children:"$HOME/.interlink/jobs"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Create a configuration file (",(0,t.jsxs)(n.strong,{children:["remember to substitute ",(0,t.jsx)(n.code,{children:"/home/username/"})," with your actual home path"]}),"):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="./interlink/manifests/plugin-config.yaml"',children:'Socket: "unix:///home/myusername/.interlink/.plugin.sock"\nInterlinkPort: "0"\nSidecarPort: "0"\n\nCommandPrefix: ""\nDataRootFolder: "/home/myusername/.interlink/jobs/"\nBashPath: /bin/bash\nVerboseLogging: false\nErrorsOnlyLogging: false\nSbatchPath: "/usr/bin/sbatch"\nScancelPath: "/usr/bin/scancel"\nSqueuePath: "/usr/bin/squeue"\nSingularityPrefix: ""\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["More on configuration options at\n",(0,t.jsx)(n.a,{href:"https://github.com/interlink-hq/interlink-slurm-plugin/blob/main/README.md",children:"official repo"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Download the ",(0,t.jsx)(n.a,{href:"https://github.com/interlink-hq/interlink-slurm-plugin/releases",children:"latest release"}),"\nbinary in ",(0,t.jsx)(n.code,{children:"$HOME/.interlink/bin/plugin"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"export PLUGIN_VERSION=$(curl -s https://api.github.com/repos/interlink-hq/interlink-slurm-plugin/releases/latest  | jq -r .name)\nwget -O $HOME/.interlink/bin/plugin https://github.com/interlink-hq/interlink-slurm-plugin/releases/download/${PLUGIN_VERSION}/interlink-sidecar-slurm_Linux_x86_64\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Start the plugins passing the configuration that you have just created:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"export SLURMCONFIGPATH=$HOME/.interlink/manifests/plugin-config.yaml\n$HOME/.interlink/bin/plugin &> $HOME/.interlink/logs/plugin.log &\necho $! > $HOME/.interlink/plugin.pid\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Check the logs in ",(0,t.jsx)(n.code,{children:"$HOME/.interlink/logs/plugin.log"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"To kill and restart the process is enough:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# kill\nkill $(cat $HOME/.interlink/plugin.pid)\n\n# restart\nexport SLURMCONFIGPATH=$HOME/.interlink/manifests/plugin-config.yaml\n$HOME/.interlink/bin/plugin &> $HOME/.interlink/logs/plugin.log &\necho $! > $HOME/.interlink/plugin.pid\n"})}),"\n"]}),"\n"]}),(0,t.jsx)(n.p,{children:"Almost there! Now it's time to add this virtual node into the Kubernetes cluster!"})]}),(0,t.jsxs)(s.Z,{value:"kubernetes",label:"Kubernetes",children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Offload your pods to a remote Kubernetes cluster."})}),(0,t.jsx)(n.p,{children:"KUBERNETES PLUGIN IS COMING SOON! For test instructions contact us!"})]})]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Yes, if you will, you can also manage all interLink processes through ",(0,t.jsx)(n.code,{children:"systemd"}),".\nReach out to receive guidance on how we do it in production. You can find an\nexample in the interlink repo ",(0,t.jsx)(n.code,{children:"./systemd"})," folder."]})}),"\n",(0,t.jsx)(n.h5,{id:"3rd-party-plugins",children:"3rd-party plugins"}),"\n",(0,t.jsxs)(n.p,{children:["There are more 3rd-party plugins developed that you can get inspired by or even\nuse out of the box. You can find some ref in the\n",(0,t.jsx)(n.a,{href:"../guides/deploy-interlink#attach-your-favorite-plugin-or-develop-one",children:"quick start section"})]}),"\n",(0,t.jsx)(n.h4,{id:"test-interlink-stack-health",children:"Test interLink stack health"}),"\n",(0,t.jsx)(n.p,{children:"interLink comes with a call that can be used to monitor the overall status of\nboth interlink server and plugins, at once."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"curl -v --unix-socket ${HOME}/.interlink/.interlink.sock  http://unix/pinglink\n"})}),"\n",(0,t.jsx)(n.p,{children:"This call will return the status of the system and its readiness to submit jobs."}),"\n",(0,t.jsx)(n.h3,{id:"deploy-kubernetes-components",children:"Deploy Kubernetes components"}),"\n",(0,t.jsxs)(n.p,{children:["The deployment of the Kubernetes components are managed by the official\n",(0,t.jsx)(n.a,{href:"https://github.com/interlink-hq/interlink-helm-chart",children:"HELM chart"}),". Depending on\nthe scenario you selected, there might be additional operations to be done."]}),"\n",(0,t.jsxs)(n.p,{children:["You can now install the helm chart with the preconfigured (by the installer\nscript) helm values in ",(0,t.jsx)(n.code,{children:"./interlink/manifests/values.yaml"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'  export INTERLINK_CHART_VERSION="X.X.X"\n  helm upgrade --install \\\n  --create-namespace \\\n  -n interlink \\\n  my-node \\\n  oci://ghcr.io/interlink-hq/interlink-helm-chart/interlink \\\n  --version $INTERLINK_CHART_VERSION \\\n  --values ./.interlink/manifests/values.yaml\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["Remember to pick the\n",(0,t.jsx)(n.a,{href:"https://github.com/interlink-hq/interlink-helm-chart/blob/main/interlink/Chart.yaml#L18",children:"version of the chart"}),"\nand put it into the ",(0,t.jsx)(n.code,{children:"INTERLINK_CHART_VERSION"})," env var above."]})}),"\n",(0,t.jsx)(n.p,{children:"Whenever you see the node ready, you are good to go!"}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["You can find a demo pod to test your setup\n",(0,t.jsx)(n.a,{href:"../guides/develop-a-plugin#lets-test-is-out",children:"here"}),"."]})}),"\n",(0,t.jsx)(n.p,{children:"To start debugging in case of problems we suggest starting from the pod\ncontainers logs!"})]})}function m(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(g,{...e})}):g(e)}},5162:(e,n,i)=>{i.d(n,{Z:()=>s});i(7294);var t=i(512);const r={tabItem:"tabItem_Ymn6"};var l=i(5893);function s(e){let{children:n,hidden:i,className:s}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,t.Z)(r.tabItem,s),hidden:i,children:n})}},4866:(e,n,i)=>{i.d(n,{Z:()=>v});var t=i(7294),r=i(512),l=i(2466),s=i(6550),o=i(469),a=i(1980),c=i(7392),d=i(12);function h(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:i}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:i,attributes:t,default:r}}=e;return{value:n,label:i,attributes:t,default:r}}))}(i);return function(e){const n=(0,c.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,i])}function p(e){let{value:n,tabValues:i}=e;return i.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:i}=e;const r=(0,s.k6)(),l=function(e){let{queryString:n=!1,groupId:i}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:n,groupId:i});return[(0,a._X)(l),(0,t.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(r.location.search);n.set(l,e),r.replace({...r.location,search:n.toString()})}),[l,r])]}function m(e){const{defaultValue:n,queryString:i=!1,groupId:r}=e,l=u(e),[s,a]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:i}=e;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${i.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=i.find((e=>e.default))??i[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:l}))),[c,h]=g({queryString:i,groupId:r}),[m,x]=function(e){let{groupId:n}=e;const i=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,l]=(0,d.Nk)(i);return[r,(0,t.useCallback)((e=>{i&&l.set(e)}),[i,l])]}({groupId:r}),k=(()=>{const e=c??m;return p({value:e,tabValues:l})?e:null})();(0,o.Z)((()=>{k&&a(k)}),[k]);return{selectedValue:s,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);a(e),h(e),x(e)}),[h,x,l]),tabValues:l}}var x=i(2389);const k={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=i(5893);function b(e){let{className:n,block:i,selectedValue:t,selectValue:s,tabValues:o}=e;const a=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.o5)(),d=e=>{const n=e.currentTarget,i=a.indexOf(n),r=o[i].value;r!==t&&(c(n),s(r))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const i=a.indexOf(e.currentTarget)+1;n=a[i]??a[0];break}case"ArrowLeft":{const i=a.indexOf(e.currentTarget)-1;n=a[i]??a[a.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":i},n),children:o.map((e=>{let{value:n,label:i,attributes:l}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>a.push(e),onKeyDown:h,onClick:d,...l,className:(0,r.Z)("tabs__item",k.tabItem,l?.className,{"tabs__item--active":t===n}),children:i??n},n)}))})}function j(e){let{lazy:n,children:i,selectedValue:r}=e;const l=(Array.isArray(i)?i:[i]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===r));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function y(e){const n=m(e);return(0,f.jsxs)("div",{className:(0,r.Z)("tabs-container",k.tabList),children:[(0,f.jsx)(b,{...e,...n}),(0,f.jsx)(j,{...e,...n})]})}function v(e){const n=(0,x.Z)();return(0,f.jsx)(y,{...e,children:h(e.children)},String(n))}},1151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>s});var t=i(7294);const r={},l=t.createContext(r);function s(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);